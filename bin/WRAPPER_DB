#!/bin/bash
#SBATCH --job-name="mongo_db"
#SBATCH --partition="niddk,norm"
#SBATCH --cpus-per-task=4
#SBATCH --time=240:00:00
#SBATCH --mem=1G
#SBATCH --output=../output/logs/mongo_db-%j.out
#SBATCH --error=../output/logs/mongo_db-%j.out
source activate ncbi_remap

# Start mongo
echo 'Starting MongoDB'
./start_db.sh

finish() {
    # stop mongo
    echo 'Stoping MongoDB'
    ./stop_db.sh
    exit 0
}
trap finish SIGTERM SIGKILL

while true; do
    sleep 1600 &
    wait $!
    echo "Up"
done
